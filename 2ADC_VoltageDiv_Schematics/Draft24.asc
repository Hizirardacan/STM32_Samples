Version 4
SHEET 1 1364 1104
WIRE 656 -1040 576 -1040
WIRE 1136 -1040 1072 -1040
WIRE 368 -928 -352 -928
WIRE 896 -928 368 -928
WIRE 1280 -928 896 -928
WIRE 1280 -896 1280 -928
WIRE 960 -784 816 -784
WIRE 1280 -784 1280 -816
WIRE 896 -736 896 -928
WIRE 816 -720 816 -784
WIRE 864 -720 816 -720
WIRE 448 -704 288 -704
WIRE 960 -704 960 -784
WIRE 960 -704 928 -704
WIRE 1072 -704 1072 -1040
WIRE 1072 -704 960 -704
WIRE 736 -688 720 -688
WIRE 784 -688 736 -688
WIRE 864 -688 784 -688
WIRE 784 -672 784 -688
WIRE 368 -656 368 -928
WIRE 288 -640 288 -704
WIRE 336 -640 288 -640
WIRE 448 -624 448 -704
WIRE 448 -624 400 -624
WIRE 576 -624 576 -1040
WIRE 576 -624 448 -624
WIRE 48 -608 0 -608
WIRE 240 -608 128 -608
WIRE 304 -608 240 -608
WIRE 336 -608 304 -608
WIRE 304 -592 304 -608
WIRE 1280 -544 1280 -720
WIRE 304 -528 240 -528
WIRE 320 -528 304 -528
WIRE 1088 -496 1040 -496
WIRE 1216 -496 1168 -496
WIRE -352 -432 -352 -928
WIRE 0 -432 0 -608
WIRE 128 -432 0 -432
WIRE 240 -432 208 -432
WIRE 416 -432 240 -432
WIRE 640 -432 640 -688
WIRE 640 -432 416 -432
WIRE 416 -416 416 -432
WIRE 1040 -416 1040 -496
WIRE 0 -400 0 -432
WIRE 240 -400 240 -432
WIRE -352 -304 -352 -352
WIRE 0 -304 0 -320
WIRE 0 -304 -352 -304
WIRE 240 -304 240 -336
WIRE 240 -304 0 -304
WIRE 320 -304 320 -528
WIRE 320 -304 240 -304
WIRE 368 -304 368 -592
WIRE 368 -304 320 -304
WIRE 416 -304 416 -336
WIRE 416 -304 368 -304
WIRE 736 -304 736 -624
WIRE 736 -304 416 -304
WIRE 784 -304 784 -592
WIRE 784 -304 736 -304
WIRE 896 -304 896 -672
WIRE 896 -304 784 -304
WIRE 1040 -304 1040 -336
WIRE 1040 -304 896 -304
WIRE 1280 -304 1280 -448
WIRE 1280 -304 1040 -304
WIRE -352 -272 -352 -304
FLAG -352 -272 0
FLAG 656 -1040 ADC1
FLAG 1136 -1040 ADC2
SYMBOL voltage -352 -448 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage 1040 -432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_GPIO
SYMATTR Value 3.3
SYMBOL npn 1216 -544 R0
WINDOW 0 55 32 Left 2
SYMATTR InstName Q1
SYMATTR Value BD139
SYMBOL res 144 -624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 224 -448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 350
SYMBOL res 256 -512 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 150k
SYMBOL OpAmps\\opamp2 368 -688 R0
SYMATTR InstName U1
SYMATTR Value lmx58_lm2904
SYMBOL LED 224 -400 R0
SYMATTR InstName Diodes
SYMATTR Value D n=3
SYMBOL res 400 -432 R0
SYMATTR InstName R4
SYMATTR Value 650
SYMBOL res 736 -704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res 768 -688 R0
SYMATTR InstName R6
SYMATTR Value 150k
SYMBOL OpAmps\\opamp2 896 -768 R0
SYMATTR InstName U2
SYMATTR Value lmx58_lm2904
SYMBOL res 1184 -512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1.5K
SYMBOL LED 1264 -784 R0
SYMATTR InstName LED
SYMBOL res 1264 -912 R0
SYMATTR InstName R8
SYMATTR Value 1.5K
SYMBOL voltage 0 -416 R0
SYMATTR InstName V2
SYMATTR Value Vext
SYMBOL cap 288 -592 R0
SYMATTR InstName C1
SYMATTR Value 10nF
SYMBOL cap 720 -688 R0
SYMATTR InstName C2
SYMATTR Value 10nF
TEXT -352 -168 Left 2 !.lib lmx58_lm2904.lib
TEXT -344 -88 Left 2 !.model BD139 NPN (\n+ IS=1e-9\n+ BF=222\n+ NF=0.85\n+ VAF=36\n+ IKF=0.166\n+ ISE=5e-9\n+ NE=1.45\n+ BR=1.35\n+ NR=1.33\n+ VAR=143\n+ IKR=1.66\n+ RB=27\n+ RE=0.0005\n+ RC=1.04\n+ CJE=1e-11\n+ VJE=0.75\n+ MJE=0.33\n+ TF=1e-9\n+ CJC=1e-11\n+ VJC=0.75\n+ MJC=0.33\n+ FC=0.5\n+ TR=1e-7)
TEXT -48 488 Left 2 !.tran 0 1 0 0.1
